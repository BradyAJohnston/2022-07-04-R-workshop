{
  "hash": "522426454c46c59fcf4826d2557c1474",
  "result": {
    "markdown": "---\ntitle: \"Scratch Document\"\noutput: html_document\ndate: '2022-07-11'\n---\n\n\nAnything you write, will be treated as text.\n\nUnless it's inside backticks.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsome_variable <- 10 * 20 * 3 * 10\nsome_variable\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 6000\n```\n:::\n:::\n\n\nThe result of our previous work is 6000\n\nAnother example is: 2.121\n\n\n## Download Data File\n\nBelow I am downloading the data file to work on.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# download.file(\n# \"https://bradyajohnston.github.io/2022-07-04-R-workshop/TL_database.xlsx\", \"TL_database.xlsx\")\n```\n:::\n\n\n## Read Data File\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n-- Attaching packages --------------------------------------- tidyverse 1.3.1 --\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nv ggplot2 3.3.5     v purrr   0.3.4\nv tibble  3.1.6     v dplyr   1.0.8\nv tidyr   1.2.0     v stringr 1.4.0\nv readr   2.1.2     v forcats 0.5.1\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'tibble' was built under R version 4.1.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'tidyr' was built under R version 4.1.2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'readr' was built under R version 4.1.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'dplyr' was built under R version 4.1.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n-- Conflicts ------------------------------------------ tidyverse_conflicts() --\nx dplyr::filter() masks stats::filter()\nx dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\n# library(readxl)\ndf_tl <- readxl::read_excel(\"TL_database.xlsx\")\n\ndf_tl_clean <- df_tl %>% \n  slice(-1, -2) %>% \n  select(-1)\n```\n:::\n\n\nAdditional setup chunk.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"janitor\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- df_tl_clean %>% \n  janitor::clean_names()\n\nhead(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 x 11\n  respondent_female_id locality_of_house age_na status_1_oldest education_highe~\n  <chr>                <chr>             <chr>  <chr>           <chr>           \n1 101                  Ossu              78     1               None or some El~\n2 201                  Ossu              69     1               None or some El~\n3 301                  Ossu              35     1               None or some El~\n4 401                  Ossu              42     1               Elementary      \n5 502                  Ossu              26     2               Senior High     \n6 602                  Ossu              30     2               Senior High     \n# ... with 6 more variables: age_at_1b_age_at_1st_birth <chr>,\n#   pregnancies_number_of <chr>, births_number_of <chr>,\n#   electricity_connected <chr>, adopted_children_in_household <chr>,\n#   wage_male_head_of_hh <chr>\n```\n:::\n:::\n\n\n# Data Cleaning\n\nWe are going to change them back to numbers, the way they should be.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>% \n  str()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [122 x 11] (S3: tbl_df/tbl/data.frame)\n $ respondent_female_id         : chr [1:122] \"101\" \"201\" \"301\" \"401\" ...\n $ locality_of_house            : chr [1:122] \"Ossu\" \"Ossu\" \"Ossu\" \"Ossu\" ...\n $ age_na                       : chr [1:122] \"78\" \"69\" \"35\" \"42\" ...\n $ status_1_oldest              : chr [1:122] \"1\" \"1\" \"1\" \"1\" ...\n $ education_highest_achieved   : chr [1:122] \"None or some Elementary\" \"None or some Elementary\" \"None or some Elementary\" \"Elementary\" ...\n $ age_at_1b_age_at_1st_birth   : chr [1:122] NA \"28\" \"20\" \"25\" ...\n $ pregnancies_number_of        : chr [1:122] \"15\" \"8\" \"6\" \"7\" ...\n $ births_number_of             : chr [1:122] \"15\" \"5\" \"4\" \"7\" ...\n $ electricity_connected        : chr [1:122] \"Yes\" \"Yes\" \"Yes\" \"Yes\" ...\n $ adopted_children_in_household: chr [1:122] \"Present\" \"Present\" \"None\" \"None\" ...\n $ wage_male_head_of_hh         : chr [1:122] \"Wages\" \"Wages\" \"No Wages\" \"No Wages\" ...\n```\n:::\n\n```{.r .cell-code}\ndf %>% \n  mutate(\n    respondent_female_id = as.numeric(respondent_female_id)\n  ) %>% \n  str()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [122 x 11] (S3: tbl_df/tbl/data.frame)\n $ respondent_female_id         : num [1:122] 101 201 301 401 502 602 701 702 703 801 ...\n $ locality_of_house            : chr [1:122] \"Ossu\" \"Ossu\" \"Ossu\" \"Ossu\" ...\n $ age_na                       : chr [1:122] \"78\" \"69\" \"35\" \"42\" ...\n $ status_1_oldest              : chr [1:122] \"1\" \"1\" \"1\" \"1\" ...\n $ education_highest_achieved   : chr [1:122] \"None or some Elementary\" \"None or some Elementary\" \"None or some Elementary\" \"Elementary\" ...\n $ age_at_1b_age_at_1st_birth   : chr [1:122] NA \"28\" \"20\" \"25\" ...\n $ pregnancies_number_of        : chr [1:122] \"15\" \"8\" \"6\" \"7\" ...\n $ births_number_of             : chr [1:122] \"15\" \"5\" \"4\" \"7\" ...\n $ electricity_connected        : chr [1:122] \"Yes\" \"Yes\" \"Yes\" \"Yes\" ...\n $ adopted_children_in_household: chr [1:122] \"Present\" \"Present\" \"None\" \"None\" ...\n $ wage_male_head_of_hh         : chr [1:122] \"Wages\" \"Wages\" \"No Wages\" \"No Wages\" ...\n```\n:::\n\n```{.r .cell-code}\ndf <- df %>%\n  mutate(across(\n    .cols = c(\n      respondent_female_id,\n      age_na,\n      status_1_oldest,\n      age_at_1b_age_at_1st_birth,\n      pregnancies_number_of,\n      births_number_of\n    ),\n    .fns = as.numeric\n  ))\nstr(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [122 x 11] (S3: tbl_df/tbl/data.frame)\n $ respondent_female_id         : num [1:122] 101 201 301 401 502 602 701 702 703 801 ...\n $ locality_of_house            : chr [1:122] \"Ossu\" \"Ossu\" \"Ossu\" \"Ossu\" ...\n $ age_na                       : num [1:122] 78 69 35 42 26 30 70 43 29 62 ...\n $ status_1_oldest              : num [1:122] 1 1 1 1 2 2 1 2 3 1 ...\n $ education_highest_achieved   : chr [1:122] \"None or some Elementary\" \"None or some Elementary\" \"None or some Elementary\" \"Elementary\" ...\n $ age_at_1b_age_at_1st_birth   : num [1:122] NA 28 20 25 17 23 28 26 24 40 ...\n $ pregnancies_number_of        : num [1:122] 15 8 6 7 6 4 5 7 1 8 ...\n $ births_number_of             : num [1:122] 15 5 4 7 6 3 5 5 1 8 ...\n $ electricity_connected        : chr [1:122] \"Yes\" \"Yes\" \"Yes\" \"Yes\" ...\n $ adopted_children_in_household: chr [1:122] \"Present\" \"Present\" \"None\" \"None\" ...\n $ wage_male_head_of_hh         : chr [1:122] \"Wages\" \"Wages\" \"No Wages\" \"No Wages\" ...\n```\n:::\n:::\n\n\n# First look at the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n respondent_female_id locality_of_house      age_na       status_1_oldest\n Min.   :  101        Length:122         Min.   :-99.00   Min.   :1.00   \n 1st Qu.: 2626        Class :character   1st Qu.: 29.00   1st Qu.:1.00   \n Median : 5251        Mode  :character   Median : 37.50   Median :1.00   \n Mean   : 5380                           Mean   : 41.05   Mean   :1.15   \n 3rd Qu.: 8176                           3rd Qu.: 55.75   3rd Qu.:1.00   \n Max.   :11001                           Max.   : 83.00   Max.   :3.00   \n                                                          NA's   :2      \n education_highest_achieved age_at_1b_age_at_1st_birth pregnancies_number_of\n Length:122                 Min.   :-99.00             Min.   : 0.000       \n Class :character           1st Qu.: 19.00             1st Qu.: 2.000       \n Mode  :character           Median : 22.00             Median : 5.000       \n                            Mean   : 21.48             Mean   : 5.016       \n                            3rd Qu.: 25.25             3rd Qu.: 7.000       \n                            Max.   : 45.00             Max.   :15.000       \n                            NA's   :22                                      \n births_number_of electricity_connected adopted_children_in_household\n Min.   : 0.000   Length:122            Length:122                   \n 1st Qu.: 2.000   Class :character      Class :character             \n Median : 4.000   Mode  :character      Mode  :character             \n Mean   : 4.598                                                      \n 3rd Qu.: 7.000                                                      \n Max.   :15.000                                                      \n                                                                     \n wage_male_head_of_hh\n Length:122          \n Class :character    \n Mode  :character    \n                     \n                     \n                     \n                     \n```\n:::\n:::\n\n\n# Let's Plot Some Data\n\nLets have a look at our data, to see if it's relevant to do some stats on.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>% \n  \n  filter(\n    age_na > 0, \n    !is.na(locality_of_house)\n    ) %>% \n  \n  ggplot(aes(\n    x = locality_of_house, \n    y = age_na\n    )) + \n  geom_jitter(width = 0.1, alpha = 0.3) + \n  geom_boxplot(\n    mapping = aes(colour = locality_of_house), \n    fill = \"transparent\", \n    #colour = \"tomato\"\n    ) + \n  theme_classic()\n```\n\n::: {.cell-output-display}\n![](scratch_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n\n```{.r .cell-code}\nplot_1 <- df %>% \n  \n  filter(\n    age_na > 0, \n    !is.na(locality_of_house)\n    ) %>% \n  \n  ggplot(aes(\n    x = locality_of_house, \n    y = age_na, \n    colour = locality_of_house\n    )) + \n  geom_jitter(width = 0.1, alpha = 0.3) + \n  geom_boxplot(\n    fill = \"transparent\", \n    #colour = \"tomato\"\n    ) + \n  theme_classic() + \n  \n  guides(colour = \"none\") + \n  \n  labs(\n    x = \"Housing Region\", \n    y = \"Age\", \n    title = \"A Plot About Houses\"\n  ) \n  \nplot_1\n```\n\n::: {.cell-output-display}\n![](scratch_files/figure-html/unnamed-chunk-8-2.png){width=672}\n:::\n:::\n\n\n## A second plot.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf %>% \n  filter(age_at_1b_age_at_1st_birth > 0) %>% \n  \n  ggplot(aes(\n    age_at_1b_age_at_1st_birth, \n    pregnancies_number_of, \n    colour = locality_of_house\n  )) + \n  geom_point() + \n  geom_smooth(mapping = aes(group = locality_of_house), \n              method = \"lm\", \n              colour = \"black\") + \n  facet_wrap(~locality_of_house) + \n  theme_classic() -> plot_2\n\n\npatchwork::wrap_plots(plot_1, patchwork::plot_spacer(), plot_2)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](scratch_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# + \n#   geom_smooth(method = \"lm\") +\n#   facet_wrap(~locality_of_house) + \n#   theme_classic() + \n#   guides(colour = \"none\") -> plot_2\n# \n# patchwork::wrap_plots(plot_1, plot_2) + \n#   patchwork::plot_annotation(tag_levels = \"A\")\n\n# save the plots to disk\nggsave(\"my_plot.pdf\", width = 20, height = 10, units = \"cm\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula 'y ~ x'\n```\n:::\n\n```{.r .cell-code}\nggsave(\"my_plot.png\", width = 20, height = 10, units = \"cm\", dpi = 600)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula 'y ~ x'\n```\n:::\n\n```{.r .cell-code}\n# open up the file using 'browseURL()`\n# browseURL(\"my_plot.pdf\")\n```\n:::\n",
    "supporting": [
      "scratch_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}